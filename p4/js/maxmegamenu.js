/*! Max Mega Menu jQuery Plugin */
!function(e){"use strict";e.maxmegamenu=function(n,t){var a,i=this,s=e(n),l=s.siblings(".mega-menu-toggle"),o={event:s.attr("data-event"),effect:s.attr("data-effect"),effect_speed:parseInt(s.attr("data-effect-speed")),effect_mobile:s.attr("data-effect-mobile"),effect_speed_mobile:parseInt(s.attr("data-effect-speed-mobile")),panel_width:s.attr("data-panel-width"),panel_inner_width:s.attr("data-panel-inner-width"),mobile_force_width:s.attr("data-mobile-force-width"),mobile_overlay:s.attr("data-mobile-overlay"),second_click:s.attr("data-second-click"),vertical_behaviour:s.attr("data-vertical-behaviour"),document_click:s.attr("data-document-click"),breakpoint:s.attr("data-breakpoint"),unbind_events:s.attr("data-unbind"),hover_intent_timeout:s.attr("data-hover-intent-timeout"),hover_intent_interval:s.attr("data-hover-intent-interval")};i.settings={};var m=e("li.mega-menu-megamenu.mega-menu-item-has-children,li.mega-menu-flyout.mega-menu-item-has-children,li.mega-menu-tabbed > ul.mega-sub-menu > li.mega-menu-item-has-children,li.mega-menu-flyout li.mega-menu-item-has-children",n),g=e("li.mega-menu-megamenu li.mega-menu-item-has-children.mega-collapse-children > a.mega-menu-link",n);i.addAnimatingClass=function(n){if("disabled"!==i.settings.effect){e(".mega-animating").removeClass("mega-animating");var t=i.settings.effect_speed+parseInt(megamenu.timeout,10);n.addClass("mega-animating"),setTimeout((function(){n.removeClass("mega-animating")}),t)}},i.hideAllPanels=function(){e(".mega-toggle-on > a.mega-menu-link",s).each((function(){i.hidePanel(e(this),!1)}))},i.hideSiblingPanels=function(n,t){n.parent().parent().find(".mega-toggle-on").children("a.mega-menu-link").each((function(){i.hidePanel(e(this),t)}))},i.isDesktopView=function(){return Math.max(window.outerWidth,e(window).width())>i.settings.breakpoint},i.isMobileView=function(){return!i.isDesktopView()},i.showPanel=function(n){if(n.parent().triggerHandler("before_open_panel"),n.attr("aria-expanded","true"),e(".mega-animating").removeClass("mega-animating"),!i.isMobileView()||!n.parent().hasClass("mega-hide-sub-menu-on-mobile")){if(i.isDesktopView()&&(s.hasClass("mega-menu-horizontal")||s.hasClass("mega-menu-vertical"))&&!n.parent().hasClass("mega-collapse-children")&&i.hideSiblingPanels(n,!0),(i.isMobileView()&&s.hasClass("mega-keyboard-navigation")||"accordion"===i.settings.vertical_behaviour)&&i.hideSiblingPanels(n,!1),i.calculateDynamicSubmenuWidths(n),n.parent().hasClass("mega-collapse-children")||"slide"===i.settings.effect||i.isMobileView()&&("slide"===i.settings.effect_mobile||"slide_left"===i.settings.effect_mobile||"slide_right"===i.settings.effect_mobile)){var t=i.isMobileView()?i.settings.effect_speed_mobile:i.settings.effect_speed;n.siblings(".mega-sub-menu").css("display","none").animate({height:"show",paddingTop:"show",paddingBottom:"show",minHeight:"show"},t,(function(){e(this).css("display","")}))}n.parent().addClass("mega-toggle-on").triggerHandler("open_panel")}},i.hidePanel=function(n,t){if(n.parent().triggerHandler("before_close_panel"),n.attr("aria-expanded","false"),n.parent().hasClass("mega-collapse-children")||!t&&"slide"===i.settings.effect||i.isMobileView()&&("slide"===i.settings.effect_mobile||"slide_left"===i.settings.effect_mobile||"slide_right"===i.settings.effect_mobile)){var a=i.isMobileView()?i.settings.effect_speed_mobile:i.settings.effect_speed;n.siblings(".mega-sub-menu").animate({height:"hide",paddingTop:"hide",paddingBottom:"hide",minHeight:"hide"},a,(function(){n.siblings(".mega-sub-menu").css("display",""),n.parent().removeClass("mega-toggle-on").triggerHandler("close_panel")}))}else t&&n.siblings(".mega-sub-menu").css("display","none").delay(i.settings.effect_speed).queue((function(){e(this).css("display","").dequeue()})),n.siblings(".mega-sub-menu").find(".widget_media_video video").each((function(){this.player.pause()})),n.parent().removeClass("mega-toggle-on").triggerHandler("close_panel"),i.addAnimatingClass(n.parent())},i.calculateDynamicSubmenuWidths=function(n){if(n.parent().hasClass("mega-menu-megamenu")&&n.parent().parent().hasClass("max-mega-menu")&&i.settings.panel_width&&e(i.settings.panel_width).length>0)if(i.isDesktopView()){var t=s.offset(),a=e(i.settings.panel_width).offset();n.siblings(".mega-sub-menu").css({width:e(i.settings.panel_width).outerWidth(),left:a.left-t.left+"px"})}else n.siblings(".mega-sub-menu").css({width:"",left:""});if(n.parent().hasClass("mega-menu-megamenu")&&n.parent().parent().hasClass("max-mega-menu")&&i.settings.panel_inner_width&&e(i.settings.panel_inner_width).length>0){var l=0;l=e(i.settings.panel_inner_width).length?parseInt(e(i.settings.panel_inner_width).width(),10):parseInt(i.settings.panel_inner_width,10);var o=parseInt(n.siblings(".mega-sub-menu").innerWidth(),10);i.isDesktopView()&&l>0&&l<o?n.siblings(".mega-sub-menu").css({paddingLeft:(o-l)/2+"px",paddingRight:(o-l)/2+"px"}):n.siblings(".mega-sub-menu").css({paddingLeft:"",paddingRight:""})}},i.bindClickEvents=function(){var n=!1;e(document).on({touchmove:function(e){n=!0},touchstart:function(e){n=!1}}),e(document).on("click touchend",(function(t){n||"collapse"!==i.settings.document_click||e(t.target).closest(".max-mega-menu li").length||e(t.target).closest(".mega-menu-toggle").length||(i.hideAllPanels(),i.hideMobileMenu()),n=!1}));var t=e("> a.mega-menu-link",m).add(g);t.on("touchend.megamenu",(function(e){i.unbindHoverEvents(),i.unbindHoverIntentEvents()})),t.not("[data-has-click-event]").on("click.megamenu",(function(t){if(i.isDesktopView()&&e(this).parent().hasClass("mega-toggle-on")&&e(this).parent().parent().parent().hasClass("mega-menu-tabbed"))return"go"===i.settings.second_click?void 0:void t.preventDefault();n||i.isMobileView()&&e(this).parent().hasClass("mega-hide-sub-menu-on-mobile")||("go"!==i.settings.second_click&&!e(this).parent().hasClass("mega-click-click-go")||void 0===e(this).attr("href")?(t.preventDefault(),e(this).parent().hasClass("mega-toggle-on")?i.hidePanel(e(this),!1):i.showPanel(e(this))):e(this).parent().hasClass("mega-toggle-on")||(t.preventDefault(),i.showPanel(e(this))))})),g.each((function(){e(this).attr("data-has-click-event","true")}))},i.bindHoverEvents=function(){m.on({"mouseenter.megamenu":function(){i.unbindClickEvents(),e(this).hasClass("mega-toggle-on")||i.showPanel(e(this).children("a.mega-menu-link"))},"mouseleave.megamenu":function(){!e(this).hasClass("mega-toggle-on")||e(this).hasClass("mega-disable-collapse")||e(this).parent().parent().hasClass("mega-menu-tabbed")||i.hidePanel(e(this).children("a.mega-menu-link"),!1)}})},i.bindHoverIntentEvents=function(){m.hoverIntent({over:function(){i.unbindClickEvents(),e(this).hasClass("mega-toggle-on")||i.showPanel(e(this).children("a.mega-menu-link"))},out:function(){!e(this).hasClass("mega-toggle-on")||e(this).hasClass("mega-disable-collapse")||e(this).parent().parent().hasClass("mega-menu-tabbed")||i.hidePanel(e(this).children("a.mega-menu-link"),!1)},timeout:i.settings.hover_intent_timeout,interval:i.settings.hover_intent_interval})},i.bindKeyboardEvents=function(){s.parent().on("keyup.megamenu",(function(e){9===(e.keyCode||e.which)&&s.parent().addClass("mega-keyboard-navigation")})),s.parent().on("keydown.megamenu",(function(n){var t=n.keyCode||n.which,a=e(n.target);32===t&&a.is(".mega-menu-link")&&s.parent().hasClass("mega-keyboard-navigation")&&(n.preventDefault(),a.parent().is(m)&&(a.parent().hasClass("mega-toggle-on")&&!a.parent().parent().parent().hasClass("mega-menu-tabbed")?i.hidePanel(a):i.showPanel(a)))})),s.parent().on("keyup.megamenu",(function(n){var t=n.keyCode||n.which,a=e(n.target);if(9===t&&s.parent().hasClass("mega-keyboard-navigation")&&(a.parent().is(m)&&!1!==a.is("[href]")?i.showPanel(a):a.parent().parent().parent().hasClass("mega-menu-tabbed")||i.hideSiblingPanels(a)),27===t&&s.parent().hasClass("mega-keyboard-navigation")){var o=0!==e("> .mega-toggle-on",s).length;e("> .mega-toggle-on > a.mega-menu-link",s).focus(),i.hideAllPanels(),i.isMobileView()&&!o&&(i.hideMobileMenu(),e(".mega-menu-toggle-block, button.mega-toggle-animated",l).first().focus())}if(13===t&&s.parent().hasClass("mega-keyboard-navigation")&&(a.hasClass("mega-menu-toggle-block")&&(l.hasClass("mega-menu-open")?i.hideMobileMenu():i.showMobileMenu()),a.parent().is(m)&&!1===a.is("[href]")&&(a.parent().hasClass("mega-toggle-on")&&!a.parent().parent().parent().hasClass("mega-menu-tabbed")?i.hidePanel(a):i.showPanel(a))),39===t&&i.isDesktopView()&&s.parent().hasClass("mega-keyboard-navigation")&&s.hasClass("mega-menu-horizontal")){var g=e("> .mega-toggle-on",s).nextAll("li.mega-menu-item:visible").find("> a.mega-menu-link, .mega-search input[type=text]").first();0===g.length&&(g=e(":focus",s).parent().nextAll("li.mega-menu-item:visible").find("> a.mega-menu-link, .mega-search input[type=text]").first()),g.focus(),g.parent().is(m)&&!1!==g.is("[href]")?i.showPanel(g):i.hideSiblingPanels(g)}if(37===t&&i.isDesktopView()&&s.parent().hasClass("mega-keyboard-navigation")&&s.hasClass("mega-menu-horizontal")){var r=e("> .mega-toggle-on",s).prevAll("li.mega-menu-item:visible").find("> a.mega-menu-link, .mega-search input[type=text]").last();0===r.length&&(r=e(":focus",s).parent().prevAll("li.mega-menu-item:visible").find("> a.mega-menu-link, .mega-search input[type=text]").last()),r.focus(),r.parent().is(m)&&!1!==r.is("[href]")?i.showPanel(r):i.hideSiblingPanels(r)}})),s.parent().on("focusout.megamenu",(function(e){s.parent().hasClass("mega-keyboard-navigation")&&setTimeout((function(){s.parent().find(":focus").length>0||(s.parent().removeClass("mega-keyboard-navigation"),i.hideAllPanels(),i.hideMobileMenu())}),10)}))},i.unbindAllEvents=function(){e("ul.mega-sub-menu, li.mega-menu-item, li.mega-menu-row, li.mega-menu-column, a.mega-menu-link, span.mega-indicator",n).off().unbind()},i.unbindClickEvents=function(){e("> a.mega-menu-link",m).not(g).off("click.megamenu touchend.megamenu")},i.unbindHoverEvents=function(){m.unbind("mouseenter.megamenu mouseleave.megamenu")},i.unbindHoverIntentEvents=function(){m.unbind("mouseenter mouseleave").removeProp("hoverIntent_t").removeProp("hoverIntent_s")},i.unbindKeyboardEvents=function(){s.parent().off("keyup.megamenu keydown.megamenu focusout.megamenu")},i.unbindMegaMenuEvents=function(){"hover_intent"===i.settings.event&&i.unbindHoverIntentEvents(),"hover"===i.settings.event&&i.unbindHoverEvents(),i.unbindClickEvents(),i.unbindKeyboardEvents()},i.bindMegaMenuEvents=function(){i.unbindMegaMenuEvents(),i.isDesktopView()&&"hover_intent"===i.settings.event&&i.bindHoverIntentEvents(),i.isDesktopView()&&"hover"===i.settings.event&&i.bindHoverEvents(),i.bindClickEvents(),i.bindKeyboardEvents()},i.checkWidth=function(){i.isMobileView()&&"desktop"===s.data("view")&&i.switchToMobile(),i.isDesktopView()&&"mobile"===s.data("view")&&i.switchToDesktop(),i.calculateDynamicSubmenuWidths(e("> li.mega-menu-megamenu > a.mega-menu-link",s))},i.reverseRightAlignedItems=function(){e("body").hasClass("rtl")||s.append(s.children("li.mega-item-align-right").get().reverse())},i.addClearClassesToMobileItems=function(){e(".mega-menu-row",s).each((function(){e("> .mega-sub-menu > .mega-menu-column:not(.mega-hide-on-mobile)",e(this)).filter(":even").addClass("mega-menu-clear")}))},i.initDesktop=function(){s.data("view","desktop"),i.bindMegaMenuEvents(),i.initIndicators()},i.switchToDesktop=function(){s.data("view","desktop"),i.bindMegaMenuEvents(),i.reverseRightAlignedItems(),i.hideAllPanels(),i.hideMobileMenu(!0)},i.initMobile=function(){i.switchToMobile()},i.switchToMobile=function(){s.data("view","mobile"),i.bindMegaMenuEvents(),i.initIndicators(),i.reverseRightAlignedItems(),i.addClearClassesToMobileItems(),i.hideAllPanels()},i.initToggleBar=function(){l.on("click",(function(n){e(n.target).is(".mega-menu-toggle, .mega-menu-toggle-custom-block *, .mega-menu-toggle-block, .mega-menu-toggle-animated-block, .mega-menu-toggle-animated-block *, .mega-toggle-blocks-left, .mega-toggle-blocks-center, .mega-toggle-blocks-right, .mega-toggle-label, .mega-toggle-label span")&&(n.preventDefault(),e(this).hasClass("mega-menu-open")?i.hideMobileMenu():i.showMobileMenu())}))},i.initIndicators=function(){e("span.mega-indicator",s).not("[data-has-click-event]").on("click.megamenu",(function(n){n.preventDefault(),n.stopPropagation(),e(this).parent().parent().hasClass("mega-toggle-on")?e(this).parent().parent().parent().parent().hasClass("mega-menu-tabbed")&&!i.isMobileView()||i.hidePanel(e(this).parent(),!1):i.showPanel(e(this).parent(),!1)})),e("span.mega-indicator",s).each((function(){e(this).attr("data-has-click-event","true")}))},i.hideMobileMenu=function(n){n=n||!1,(l.is(":visible")||n)&&(a=setTimeout((function(){e("body").removeClass(s.attr("id")+"-mobile-open"),e("html").removeClass(s.attr("id")+"-off-canvas-open")}),i.settings.effect_speed_mobile),e(".mega-toggle-label, .mega-toggle-animated",l).attr("aria-expanded","false"),"slide"!==i.settings.effect_mobile||n||s.animate({height:"hide"},i.settings.effect_speed_mobile,(function(){s.css({width:"",left:"",display:""})})),s.css({width:"",left:"",display:""}),l.removeClass("mega-menu-open"),s.triggerHandler("mmm:hideMobileMenu"))},i.showMobileMenu=function(){l.is(":visible")&&(clearTimeout(a),e("body").addClass(s.attr("id")+"-mobile-open"),"slide_left"!==i.settings.effect_mobile&&"slide_right"!==i.settings.effect_mobile||e("html").addClass(s.attr("id")+"-off-canvas-open"),e(".mega-toggle-label, .mega-toggle-animated",l).attr("aria-expanded","true"),i.toggleBarForceWidth(),"slide"===i.settings.effect_mobile&&s.animate({height:"show"},i.settings.effect_speed_mobile),l.addClass("mega-menu-open"),s.triggerHandler("mmm:showMobileMenu"))},i.toggleBarForceWidth=function(){if(e(i.settings.mobile_force_width).length&&("slide"===i.settings.effect_mobile||"disabled"===i.settings.effect_mobile)){var n=l.offset(),t=e(i.settings.mobile_force_width).offset();s.css({width:e(i.settings.mobile_force_width).outerWidth(),left:t.left-n.left+"px"})}},i.init=function(){s.triggerHandler("before_mega_menu_init"),i.settings=e.extend({},o,t),s.removeClass("mega-no-js"),i.initToggleBar(),"true"===i.settings.unbind_events&&i.unbindAllEvents(),e(window).on("load",(function(){i.calculateDynamicSubmenuWidths(e("> li.mega-menu-megamenu > a.mega-menu-link",s))})),i.isDesktopView()?i.initDesktop():i.initMobile(),e(window).resize((function(){i.checkWidth()})),s.triggerHandler("after_mega_menu_init")},i.init()},e.fn.maxmegamenu=function(n){return this.each((function(){if(void 0===e(this).data("maxmegamenu")){var t=new e.maxmegamenu(this,n);e(this).data("maxmegamenu",t)}}))},e((function(){e(".max-mega-menu").maxmegamenu()}))}(jQuery);